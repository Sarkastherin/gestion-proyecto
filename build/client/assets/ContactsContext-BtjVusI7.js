import{r as n,j as C}from"./chunk-PVWAREVJ-Cl_c9Jt0.js";const u=n.createContext(void 0),b=()=>{const i=n.useContext(u);if(!i)throw new Error("useContacts must be used within ContactsProvider");return i},E=({children:i})=>{const[l,d]=n.useState(null),[p,f]=n.useState(null),[h,m]=n.useState(null),[y,c]=n.useState(null),w=async()=>{const o=[];try{let e=1;const a=100;let s=!0;for(;s;){const t=await fetch("/.netlify/functions/contactos",{method:"POST",body:JSON.stringify({page:e,page_size:a})});if(!t.ok)throw new Error(`â›” Problemas obteniendo contactos de base de datos extena ðŸ—„ï¸. Mensaje: ${t.statusText}. | Status: 500`);const r=await t.json();o.push(...r.data),s=r.has_more,e++}return d(o),{success:!0}}catch(e){return{success:!1,error:e}}},S=async()=>{const o=[];try{let e=1;const a=100;let s=!0;for(;s;){const t=await fetch("/.netlify/functions/proveedores",{method:"POST",body:JSON.stringify({page:e,page_size:a})});if(!t.ok)throw new Error(`â›” Problemas obteniendo contactos de base de datos extena ðŸ—„ï¸. Mensaje: ${t.statusText}. | Status: 500`);const r=await t.json();o.push(...r.data),s=r.has_more,e++}return f(o),{success:!0}}catch(e){return{success:!1,error:e}}},x=async()=>{const o=[];try{let e=1;const a=100;let s=!0;for(;s;){const t=await fetch("/.netlify/functions/empleados",{method:"POST",body:JSON.stringify({page:e,page_size:a})});if(!t.ok)throw new Error(`â›” Problemas obteniendo contactos de base de datos extena ðŸ—„ï¸. Mensaje: ${t.statusText}. | Status: 500`);const r=await t.json();o.push(...r.data),s=r.has_more,e++}return m(o),{success:!0}}catch(e){return{success:!1,error:e}}};return n.useEffect(()=>{(async()=>{const{error:e}=await w();if(e){c(!1);return}const{error:a}=await S();if(a){c(!1);return}const{error:s}=await x();if(s){c(!1);return}c(!0)})()},[]),C.jsx(u.Provider,{value:{clients:l,suppliers:p,isLoadedContacts:y,setIsLoadedContacts:c,employees:h},children:i})};export{E as C,b as u};
