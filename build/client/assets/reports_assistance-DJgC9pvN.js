import{w as n,r as a,j as t}from"./chunk-PVWAREVJ-Cl_c9Jt0.js";import{E as m}from"./EntityTable-DKwDIY9O.js";import{u as p}from"./DataContext-BHROWMOn.js";import{C as c}from"./Containers-ZXGJ7diH.js";import{P as d}from"./ProtectedRoute-DTKDj7Jz.js";import{f as u}from"./functionsDays-BZooa-Ef.js";import{B as b}from"./Badge-BNjmnaCE.js";import{F as f}from"./FooterUITable-C66h8R_K.js";import{a as y}from"./Buttons-ByA9cNaT.js";import{A as h}from"./allowedRoles-wIcqt93s.js";import{L as x}from"./LoaderComponent-DzoOhiNN.js";import"./Inputs-cvlDeTHR.js";import"./Buttons-DjYWmDVV.js";import"./IconComponent-CkWBZZXK.js";import"./UIContext-9PjeG9pu.js";import"./supabaseClient-O5NoNd5h.js";import"./ContactsContext-BtjVusI7.js";import"./functions-CIXTKjf3.js";import"./arrow-left-3CO6tBoR.js";import"./AuthContext-DiXfFtBN.js";import"./Link-DZjWQWvu.js";import"./TrashIcon-CpHN25SK.js";function Y({}){return[{title:"Asistencias"},{name:"description",content:"Asistencias"}]}const E=[{name:"Id",selector:e=>e.id,width:"80px",sortable:!0},{name:"Fecha",selector:e=>u(e.date_report)||"",sortable:!0,width:"130px"},{name:"Empleado",selector:e=>{var o;return((o=e.employee)==null?void 0:o.contacto_nombre)||""},sortable:!0},{name:"Asistencia",cell:e=>t.jsx(b,{variant:e.absent?"red":"green",children:e.absent?"Ausente":"Presente"}),sortable:!0,width:"130px"},{name:"Entrada",selector:e=>e.hour_start||"",sortable:!0,width:"120px"},{name:"Salida",selector:e=>e.hour_end||"",sortable:!0,width:"120px"},{name:"Proyecto",selector:e=>e.project_name||"",sortable:!0}],q=n(function(){const{getReportsEmployees:o,reportsEmployees:r}=p();a.useEffect(()=>{r||o()},[]);const[i,s]=a.useState(r??[]);a.useEffect(()=>{s(r??[])},[r]);const l=[{label:"ID",key:"id"},{label:"Fecha",key:"date_report"},{label:"Empleado",key:"employee.contacto_nombre"},{label:"Asistencia",key:"absent"},{label:"Entrada",key:"hour_start"},{label:"Salida",key:"hour_end"},{label:"Proyecto",key:"project_name"}];return r?t.jsxs(d,{allowed:h,children:[t.jsx(c,{title:"Asistencias",width:"w-full",children:t.jsx(m,{data:r,columns:E,onFilteredChange:s,filterFields:[{key:"employee.contacto_nombre",label:"Nombre del empleado",autoFilter:!0},{key:"absent",label:"Asistencia",type:"select",options:t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"true",children:"Ausente"}),t.jsx("option",{value:"false",children:"Presente"})]}),autoFilter:!0},{key:"project_name",label:"Proyecto",autoFilter:!0},{key:"date_report",label:"Fecha",type:"dateRange",autoFilter:!0}]})}),t.jsx(f,{justify:"justify-between",children:t.jsx("div",{className:"flex gap-4",children:t.jsx(y,{data:i,headers:l,filename:"Asistencias",type:"absents"})})})]}):t.jsx(x,{})});export{q as default,Y as meta};
