import{w as n,r as i,j as o}from"./chunk-PVWAREVJ-Cl_c9Jt0.js";import{E as d}from"./EntityTable-CYBYbV-K.js";import{u as m}from"./DataContext-B4mtDhe5.js";import{C as p}from"./Containers-ZXGJ7diH.js";import{P as u}from"./ProtectedRoute-DTKDj7Jz.js";import{f as c}from"./functionsDays-BZooa-Ef.js";import{A as y}from"./allowedRoles-DvcEYYJr.js";import{L as b}from"./LoaderComponent-DzoOhiNN.js";import{R as h}from"./receipt-CJvoXreP.js";import"./Inputs-cvlDeTHR.js";import"./Buttons-C61rKE9q.js";import"./IconComponent-CkWBZZXK.js";import"./UIContext-9PjeG9pu.js";import"./supabaseClient-O5NoNd5h.js";import"./Buttons-dijALP0_.js";import"./index-DvKACyVh.js";import"./functions-llu_GUtd.js";import"./TrashIcon-CpHN25SK.js";import"./ContactsContext-BtjVusI7.js";import"./arrow-left-3CO6tBoR.js";import"./AuthContext-DiXfFtBN.js";function W({}){return[{title:"Horas Equivalentes y viáticos"},{name:"description",content:"Horas Equivalentes y viáticos"}]}const f=["lunes","martes","miércoles","jueves","viernes","sábado","domingo"],_=[{name:"Id",selector:e=>e.id,width:"80px",sortable:!0},{name:"Empleado",selector:e=>{var t;return((t=e.employee)==null?void 0:t.contacto_nombre)||""},sortable:!0},{name:"Fecha",selector:e=>c(e.date_report)||"",sortable:!0,width:"130px"},{name:"Día de la semana",selector:e=>{const t=e.date_report.split("-"),a=`${t[0]}-${t[1]}-${t[2]}`;return`${f[new Date(a).getDay()]}`},sortable:!0,width:"150px"},{name:"Entrada",selector:e=>e.hour_start||"",sortable:!0,width:"120px"},{name:"Salida",selector:e=>e.hour_end||"",sortable:!0,width:"120px"},{name:"Total horas",selector:e=>{var t;return((t=e.hours_worked)==null?void 0:t.toFixed(2))||"0"},sortable:!0,width:"150px"},{name:"Horas equiv",selector:e=>e.equivalent_hours??0,sortable:!0,width:"150px"},{name:"Tipo de día",selector:e=>e.day_type==="weekday"?"Día laborable":e.day_type==="saturday"?"Sábado":e.day_type==="sundayOrHoliday"?"Domingo/Feriado":"",sortable:!0,width:"150px"},{name:"Proyecto",selector:e=>e.project_name||"",sortable:!0},{name:"Viatico",cell:e=>e.viaticum?"Sí":"No",sortable:!0,width:"120px"}],N=n(function(){const{getLiquidationReport:t,liquidationReport:a}=m();i.useEffect(()=>{a||t()},[]);const[r,l]=i.useState(a);i.useEffect(()=>{a&&l(a)},[a]);const s=[{label:"ID",key:"id"},{label:"Fecha",key:"date_report"},{label:"Empleado",key:"employee.contacto_nombre"},{label:"Asistencia",key:"absent"},{label:"Entrada",key:"hour_start"},{label:"Salida",key:"hour_end"},{label:"Proyecto",key:"project_name"},{label:"Total horas",key:"hours_worked"},{label:"Horas equivalentes",key:"equivalent_hours"},{label:"Viatico",key:"viaticum"}];return r?o.jsx(u,{allowed:y,children:o.jsx(p,{title:"Horas Equivalentes y viáticos",width:"w-full",back_path:"/rrhh",IconComponent:{component:h,color:"text-green-600"},children:o.jsx(d,{data:r,columns:_,onFilteredChange:l,filterFields:[{key:"employee.contacto_nombre",label:"Nombre del empleado",autoFilter:!0},{key:"absent",label:"Asistencia",type:"select",options:o.jsxs(o.Fragment,{children:[o.jsx("option",{value:"true",children:"Ausente"}),o.jsx("option",{value:"false",children:"Presente"})]}),autoFilter:!0},{key:"project_name",label:"Proyecto",autoFilter:!0},{key:"date_report",label:"Fecha",type:"dateRange",autoFilter:!0}],buttonExport:{headers:s,filename:"Liquidación de sueldos",type:"liquidation"}})})}):o.jsx(b,{})});export{N as default,W as meta};
