const l="1.0.31",g={version:l},f=g.version,_=(i,t)=>{const o=Math.pow(10,t);return Math.round((i+Number.EPSILON)*o)/o};function w(i){var u,p;const t=((u=i.details_items[0])==null?void 0:u.id_quote)??((p=i.details_materials[0])==null?void 0:p.id_quote)??0,o=_(i.details_materials.reduce((e,s)=>{var d;return e+s.quantity*(((d=s.prices)==null?void 0:d.price)||0)},0),2),n=_(i.details_items.filter(e=>e.type==="mano de obra").reduce((e,s)=>e+(s.quantity*s.unit_cost||0),0),2),a=_(i.details_items.filter(e=>e.type==="subcontratos").reduce((e,s)=>e+(s.quantity*s.unit_cost||0),0),2),c=_(i.details_items.filter(e=>e.type==="otros").reduce((e,s)=>e+(s.quantity*s.unit_cost||0),0),2);return{id_quote:t,total_materials:o,total_labor:n,total_subcontracting:a,total_others:c}}const q=i=>{const t=i.getDate(),o=i.getMonth()+1,n=i.getFullYear(),a=t>9?String(t):`0${t}`,c=o>9?String(o):`0${o}`;return`${n}-${c}-${a}`},r=i=>typeof i=="string"?i.replace(/"/g,'""'):i??"",y=i=>t=>{var o,n,a,c,u,p,e;if(i==="materials"){const s=((o=t.prices)==null?void 0:o.find(d=>d.default))??{};return{id:t.id,description:r(t.description),weight:t.weight??"",unit:t.id_unit??"",price:s.price??"",supplier:s.id_supplier??"","view_categorizations.description_family":r(((n=t.view_categorizations)==null?void 0:n.description_family)??""),"view_categorizations.description_category":r(((a=t.view_categorizations)==null?void 0:a.description_category)??""),"view_categorizations.description_subcategory":r(((c=t.view_categorizations)==null?void 0:c.description_subcategory)??"")}}return i==="resumen"?{type:r(t.type||""),"materials.id":r(((u=t.materials)==null?void 0:u.id)||""),"materials.description":r(((p=t.materials)==null?void 0:p.description)||""),item:r(t.item||""),quantity:t.quantity??"","prices.price":((e=t.prices)==null?void 0:e.price)??"",unit_cost:t.unit_cost??"",unit:r(t.unit||"")}:{}},h=(i,t)=>i.map(y(t));export{f as a,q as d,w as g,_ as r,h as s};
