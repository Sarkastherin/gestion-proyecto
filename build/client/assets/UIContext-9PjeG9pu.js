import{r as s,j as x}from"./chunk-PVWAREVJ-Cl_c9Jt0.js";import{s as R}from"./supabaseClient-O5NoNd5h.js";const w=s.createContext(void 0),D=({children:o})=>{const[m,c]=s.useState({type:null}),[i,d]=s.useState([]),g=(r,a)=>{c({type:r,props:a})},u=()=>{c({type:null})},y=(r,a)=>{d(S=>S.map((l,f)=>f===r?{...l,status:a}:l))};return x.jsx(w.Provider,{value:{modal:m,openModal:g,closeModal:u,progressiveSteps:i,setProgressiveSteps:d,updateStep:y},children:o})},A=()=>{const o=s.useContext(w);if(!o)throw new Error("useUIModals must be used within UIModalsProvider");return o},M=s.createContext(void 0);function F({children:o}){const{openModal:m}=A(),c=window.matchMedia("(prefers-color-scheme: dark)").matches,[i,d]=s.useState(c?"dark":"light"),[g,u]=s.useState(null),[y,r]=s.useState(!1),[a,S]=s.useState(null),[l,f]=s.useState(null),[C,U]=s.useState(null),[_,n]=s.useState(!1),E=()=>{d(t=>t==="dark"?"light":"dark"),document.documentElement.setAttribute("data-theme",i==="dark"?"light":"dark")},I=async()=>{try{const{data:t,error:p}=await R.from("view_categorizations").select("*");if(p)throw new Error(p.message);const j=t==null?void 0:t.map(e=>({id:e.id_subcategory,description:e.description_subcategory,id_category:e.id_category})),h=t==null?void 0:t.map(e=>({id:e.id_category,description:e.description_category,id_family:e.id_family})),z=Array.from(new Map(h==null?void 0:h.map(e=>[e.id,e])).values()),v=t==null?void 0:t.map(e=>({id:e.id_family,description:e.description_family})),B=Array.from(new Map(v==null?void 0:v.map(e=>[e.id,e])).values());u({families:B,categories:z,subcategories:j??null})}catch{m("ERROR")}},b=(t,p)=>{n==null||n(p),t&&n(!1)},[P,k]=s.useState({activeType:"materiales",selsectedPhase:0});return x.jsx(M.Provider,{value:{toggleTheme:E,theme:i,selectedClient:a,setSelectedClient:S,isFieldsChanged:_,setIsFieldsChanged:n,handleSetIsFieldsChanged:b,categorizations:g,setCategorizations:u,getCategorizations:I,selectedSupplier:l,setSelectedSupplier:f,setEditByStatus:r,editByStatus:y,propsQuoteAndBudget:P,setPropsQuoteAndBudget:k,selectedEmployee:C,setSelectedEmployee:U},children:o})}function O(){const o=s.useContext(M);if(!o)throw new Error("useUI debe usarse dentro de <UIProvider>");return o}export{D as U,O as a,F as b,A as u};
