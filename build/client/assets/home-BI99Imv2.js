import{w as n,u as l,r as p,j as o}from"./chunk-PVWAREVJ-Cl_c9Jt0.js";import{a as u}from"./Badge-BNjmnaCE.js";import{S as m}from"./StatusOptions-C3TsQ3Nf.js";import{u as d}from"./DataContext-B4mtDhe5.js";import{E as c}from"./EntityTable-CYBYbV-K.js";import"./Buttons-dijALP0_.js";import{C as b}from"./Containers-ZXGJ7diH.js";import{P as f}from"./ProtectedRoute-DTKDj7Jz.js";import{a as x}from"./allowedRoles-DvcEYYJr.js";import{L as y}from"./LoaderComponent-DzoOhiNN.js";import{B as h}from"./briefcase-business-C6ySRwuO.js";import"./supabaseClient-O5NoNd5h.js";import"./ContactsContext-BtjVusI7.js";import"./functions-llu_GUtd.js";import"./Inputs-cvlDeTHR.js";import"./Buttons-C61rKE9q.js";import"./IconComponent-CkWBZZXK.js";import"./UIContext-9PjeG9pu.js";import"./index-DvKACyVh.js";import"./TrashIcon-CpHN25SK.js";import"./arrow-left-3CO6tBoR.js";import"./AuthContext-DiXfFtBN.js";function q({}){return[{title:"Oportunidades"},{name:"description",content:"Oportunidades"}]}const k=[{name:"Id",selector:e=>e.id,width:"80px",sortable:!0},{name:"Fecha",selector:e=>new Date(e.created_at).toLocaleDateString("es-AR",{year:"numeric",month:"2-digit",day:"2-digit"}),width:"170px",sortable:!0},{name:"Nombre de la Oportunidad",selector:e=>e.name,sortable:!0},{name:"Cliente",selector:e=>{var t;return((t=e.client)==null?void 0:t.nombre)||""},width:"270px",sortable:!0},{name:"Status",cell:e=>o.jsx(u,{status:e.status,children:e.status}),width:"130px"},{name:"Creado por",selector:e=>{var t;return((t=e.users)==null?void 0:t.user_name)||""},width:"120px",sortable:!0}],O=[{label:"Id",key:"id"},{label:"Fecha",key:"created_at"},{label:"Nombre de la Oportunidad",key:"name"},{label:"Cliente",key:"client.nombre"},{label:"Alcance",key:"scope"},{label:"Status",key:"status"},{label:"Motivo de pérdida",key:"loss_reason"},{label:"Creado por",key:"users.user_name"}],z=n(function(){const{getOpportunities:t,opportunities:r,setSelectedOpportunity:a}=d(),i=l();return p.useEffect(()=>{r||t()},[]),r?o.jsx(f,{allowed:x,children:o.jsx(b,{title:"Oportunidades",width:"w-full",IconComponent:{component:h,color:"text-green-600 dark:text-green-400"},back_path:"/",children:o.jsx(c,{data:r,columns:k,onRowClick:s=>{a(null),i(`/opportunities/${s.id}/resumen`)},filterFields:[{key:"name",label:"Buscar por descripción",autoFilter:!0},{key:"client.nombre",label:"Buscar por cliente",autoFilter:!0},{key:"status",label:"Estado",type:"select",options:o.jsx(m,{}),autoFilter:!0}],buttonExport:{headers:O,filename:"Oportunidades",type:"opportunities"},buttonNavigate:{route:"/opportunities/new-opportunity",title:"+ Oportunidad",color:"green"}})})}):o.jsx(y,{})});export{z as default,q as meta};
