import{s as i}from"./ContactsContext-CvsXE9G3.js";const n=o=>({insertOne:async t=>{try{const{data:e,error:r}=await i.from(o).insert([t]).select();if(r)throw r;return{data:(e==null?void 0:e[0])??null,error:null}}catch(e){return{data:null,error:e instanceof Error?e:new Error(typeof e=="object"&&e!==null&&"message"in e?e.message:String(e))}}},insert:async t=>{try{const{data:e,error:r}=await i.from(o).insert(t).select();if(r)throw r;return{data:e??null,error:null}}catch(e){return{data:null,error:e instanceof Error?e:new Error(typeof e=="object"&&e!==null&&"message"in e?e.message:String(e))}}},getAll:async t=>{const e=t.page??1,r=t.pageSize??100,a=(e-1)*r,l=a+r-1;try{const{data:s,error:g,count:m}=await i.from(o).select("*",{count:"exact"}).order("id",{ascending:!0}).range(a,l);if(g)throw g;return{data:s??[],error:null,count:m}}catch(s){return{data:null,error:s instanceof Error?s:new Error(typeof s=="object"&&s!==null&&"message"in s?s.message:String(s)),count:null}}},getById:async({id:t})=>{try{const{data:e,error:r}=await i.from(o).select("*").eq("id",t);if(r)throw r;return{data:(e==null?void 0:e[0])??null,error:null}}catch(e){return console.log(e),{data:null,error:e instanceof Error?e:new Error(typeof e=="object"&&e!==null&&"message"in e?e.message:String(e))}}},getDataByAnyColumn:async({column:t,id:e})=>{try{const{data:r,error:a,count:l}=await i.from(o).select("*").eq(t,e);if(a)throw a;return{data:r??[],error:null,count:l}}catch(r){return{data:null,error:r instanceof Error?r:new Error(typeof r=="object"&&r!==null&&"message"in r?r.message:String(r)),count:null}}},update:async({id:t,values:e})=>{try{const{status:r,error:a}=await i.from(o).update(e).eq("id",t);if(a)throw a;return{status:r,error:null}}catch(r){return{status:null,error:r instanceof Error?r:new Error(typeof r=="object"&&r!==null&&"message"in r?r.message:String(r))}}},remove:async({id:t})=>{try{const{status:e,error:r}=await i.from(o).delete().eq("id",t);if(r)throw r;return{status:e,error:null}}catch(e){return e.code==="23503"?{status:null,error:new Error("No se puede eliminar este registro porque estÃ¡ siendo utilizado en otra tabla.")}:{status:null,error:e instanceof Error?e:new Error(typeof e=="object"&&e!==null&&"message"in e?e.message:String(e))}}},filter:async t=>{var e;try{let r=i.from(o).select("*",{count:"exact"});if(t.searchText&&((e=t.columnsToSearch)!=null&&e.length)){const u=t.columnsToSearch.map(c=>`${c}.ilike.%${t.searchText}%`).join(",");r=r.or(u)}if(t.exactFilters)for(const[u,c]of Object.entries(t.exactFilters))c!==""&&(r=r.eq(u,c));if(t.rangeFilters)for(const[u,c]of Object.entries(t.rangeFilters))c.min!==void 0&&(r=r.gte(u,c.min)),c.max!==void 0&&(r=r.gte(u,c.max));const a=t.page??1,l=t.pageSize??10,s=(a-1)*l,g=s+l-1;r=r.range(s,g);const{data:m,error:f,count:d}=await r;if(f)throw f;return{data:m??[],error:null,count:d}}catch(r){return console.log(r),{data:null,error:r instanceof Error?r:new Error(typeof r=="object"&&r!==null&&"message"in r?r.message:String(r)),count:null}}},getDataByEveryIds:async(t,e)=>{try{const{data:r,error:a,count:l}=await i.from(o).select("*",{count:"exact"}).in(e,t);if(a)throw a;return{data:r??[],error:null,count:l}}catch(r){return{data:null,error:r instanceof Error?r:new Error(typeof r=="object"&&r!==null&&"message"in r?r.message:String(r)),count:null}}}}),y=n("opportunities"),h=n("phases"),w=n("quotes"),E=n("details_items"),A=n("details_materials"),j=n("prices"),S=n("materials"),b=n("families"),q=n("categories"),x=n("subcategories"),_=n("units"),v=n("projects"),z=n("phases_project"),F=n("budget_details_items"),T=n("budget_details_materials");export{h as a,v as b,q as c,E as d,z as e,b as f,F as g,T as h,A as i,S as m,y as o,j as p,w as q,x as s,_ as u};
