import{w as x,a as g,b as y,u as _,r as O,j as o,O as P}from"./chunk-PVWAREVJ-Cl_c9Jt0.js";import{a as Q}from"./UIContext-9PjeG9pu.js";import{S as j}from"./SectionCreateQuote-CLV3vJBJ.js";import{u as C}from"./realTime-Csd-v9-x.js";import{u as v}from"./DataContext-BHROWMOn.js";import{Q as q}from"./QuotesAndBudgetLayout-B1iVPJEX.js";import"./supabaseClient-O5NoNd5h.js";import"./Buttons-DjYWmDVV.js";import"./IconComponent-CkWBZZXK.js";import"./Cards-BPIQ6iiA.js";import"./Link-DZjWQWvu.js";import"./ModalBase-Czr0Q5I6.js";import"./EntityTable-DKwDIY9O.js";import"./Inputs-cvlDeTHR.js";import"./Badge-BNjmnaCE.js";import"./useModalState-Dynfoma4.js";import"./ContactsContext-BtjVusI7.js";import"./functions-CIXTKjf3.js";function J({}){return[{title:"Oportunidad [Cotizaciones]"},{name:"description",content:"Oportunidad [Cotizaciones]"}]}const K=x(function(){C();const{selectedQuoteId:e}=g(),{id:m}=y(),c=_(),{setPropsQuoteAndBudget:r}=Q(),{selectedOpportunity:d}=v(),{phases:l,quotes:a,details_materials:p,details_items:n}=d||{},h=(a==null?void 0:a.length)===0;O.useEffect(()=>{f()},[e]);const f=()=>{if(!e)return;const i=p==null?void 0:p.filter(t=>t.id_quote===e),s=n==null?void 0:n.filter(t=>t.id_quote===e);i&&i.length>0?(i.sort((t,u)=>t.id_phase-u.id_phase),r({activeType:"materiales",selsectedPhase:i[0].id_phase||0})):s&&s.length>0?(s.sort((t,u)=>t.id_phase-u.id_phase),r(()=>({activeType:s[0].type,selsectedPhase:s[0].id_phase||0})),c(`opportunities/${m}/quotes/items`)):r({activeType:"materiales",selsectedPhase:0})};return o.jsx(o.Fragment,{children:h?o.jsx(j,{}):e&&o.jsx(q,{phases:l,type:"quotes",children:o.jsx(P,{context:{selectedQuoteId:e}})})})});export{K as default,J as meta};
