import{w as x,a as g,b as y,u as _,r as O,j as o,O as P}from"./chunk-PVWAREVJ-Cl_c9Jt0.js";import{a as Q}from"./UIContext-9PjeG9pu.js";import{S as j}from"./SectionCreateQuote-YkDB4xL7.js";import{u as C}from"./realTime-VCRs_Sia.js";import{u as v}from"./DataContext-B4mtDhe5.js";import{Q as q}from"./QuotesAndBudgetLayout-D5Vah2Mj.js";import"./supabaseClient-O5NoNd5h.js";import"./Buttons-C61rKE9q.js";import"./IconComponent-CkWBZZXK.js";import"./Cards-BPIQ6iiA.js";import"./Buttons-dijALP0_.js";import"./index-DvKACyVh.js";import"./functions-llu_GUtd.js";import"./TrashIcon-CpHN25SK.js";import"./ModalBase-CQji_mgJ.js";import"./EntityTable-CYBYbV-K.js";import"./Inputs-cvlDeTHR.js";import"./Badge-BNjmnaCE.js";import"./useModalState-Dynfoma4.js";import"./ContactsContext-BtjVusI7.js";function M({}){return[{title:"Oportunidad [Cotizaciones]"},{name:"description",content:"Oportunidad [Cotizaciones]"}]}const V=x(function(){C();const{selectedQuoteId:e}=g(),{id:m}=y(),c=_(),{setPropsQuoteAndBudget:r}=Q(),{selectedOpportunity:d}=v(),{phases:l,quotes:a,details_materials:p,details_items:n}=d||{},h=(a==null?void 0:a.length)===0;O.useEffect(()=>{f()},[e]);const f=()=>{if(!e)return;const i=p==null?void 0:p.filter(t=>t.id_quote===e),s=n==null?void 0:n.filter(t=>t.id_quote===e);i&&i.length>0?(i.sort((t,u)=>t.id_phase-u.id_phase),r({activeType:"materiales",selsectedPhase:i[0].id_phase||0})):s&&s.length>0?(s.sort((t,u)=>t.id_phase-u.id_phase),r(()=>({activeType:s[0].type,selsectedPhase:s[0].id_phase||0})),c(`opportunities/${m}/quotes/items`)):r({activeType:"materiales",selsectedPhase:0})};return o.jsx(o.Fragment,{children:h?o.jsx(j,{}):e&&o.jsx(q,{phases:l,type:"quotes",children:o.jsx(P,{context:{selectedQuoteId:e}})})})});export{V as default,M as meta};
